var h=(t,e,s)=>new Promise((r,i)=>{var n=l=>{try{o(s.next(l))}catch(u){i(u)}},a=l=>{try{o(s.throw(l))}catch(u){i(u)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);o((s=s.apply(t,e)).next())});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();const Ai="modulepreload",Ci=function(t){return"/"+t},qs={},Ke=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(s.map(l=>{if(l=Ci(l),l in qs)return;qs[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Ai,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((_,y)=>{d.addEventListener("load",_),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})},ji=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...s)=>Ke(()=>h(void 0,null,function*(){const{default:r}=yield Promise.resolve().then(()=>Qe);return{default:r}}),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class ws extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Ii extends ws{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $i extends ws{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Li extends ws{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ns;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ns||(ns={}));var Yi=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class Ui{constructor(e,{headers:s={},customFetch:r,region:i=ns.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=ji(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Yi(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:a}=s;let o={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob!="undefined"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData!="undefined"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(v=>{throw new Ii(v)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new $i(c);if(!c.ok)throw new Li(c);let _=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return _==="application/json"?y=yield c.json():_==="application/octet-stream"?y=yield c.blob():_==="text/event-stream"?y=c:_==="multipart/form-data"?y=yield c.formData():y=yield c.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}function Ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fi(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),s}var $={},je={},Ie={},$e={},Le={},Ye={},Wi=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},Ze=Wi();const Hi=Ze.fetch,br=Ze.fetch.bind(Ze),kr=Ze.Headers,Bi=Ze.Request,Vi=Ze.Response,Qe=Object.freeze(Object.defineProperty({__proto__:null,Headers:kr,Request:Bi,Response:Vi,default:br,fetch:Hi},Symbol.toStringTag,{value:"Module"})),Gi=Fi(Qe);var bt={},zs;function Sr(){if(zs)return bt;zs=1,Object.defineProperty(bt,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return bt.default=t,bt}var Js;function Or(){if(Js)return Ye;Js=1;var t=Ye&&Ye.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ye,"__esModule",{value:!0});const e=t(Gi),s=t(Sr());class r{constructor(n){this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=n.headers,this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=n.shouldThrowOnError,this.signal=n.signal,this.isMaybeSingle=n.isMaybeSingle,n.fetch?this.fetch=n.fetch:typeof fetch=="undefined"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=Object.assign({},this.headers),this.headers[n]=a,this}then(n,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(u=>h(this,null,function*(){var c,d,_;let y=null,v=null,E=null,w=u.status,Y=u.statusText;if(u.ok){if(this.method!=="HEAD"){const J=yield u.text();J===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=J:v=JSON.parse(J))}const U=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),N=(d=u.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");U&&N&&N.length>1&&(E=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(y={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,E=null,w=406,Y="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const U=yield u.text();try{y=JSON.parse(U),Array.isArray(y)&&u.status===404&&(v=[],y=null,w=200,Y="OK")}catch(N){u.status===404&&U===""?(w=204,Y="No Content"):y={message:U}}if(y&&this.isMaybeSingle&&(!((_=y==null?void 0:y.details)===null||_===void 0)&&_.includes("0 rows"))&&(y=null,w=200,Y="OK"),y&&this.shouldThrowOnError)throw new s.default(y)}return{error:y,data:v,count:E,status:w,statusText:Y}}));return this.shouldThrowOnError||(l=l.catch(u=>{var c,d,_;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(_=u==null?void 0:u.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),l.then(n,a)}returns(){return this}overrideTypes(){return this}}return Ye.default=r,Ye}var Ks;function Tr(){if(Ks)return Le;Ks=1;var t=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0});const e=t(Or());class s extends e.default{select(i){let n=!1;const a=(i!=null?i:"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:n=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:a=n}={}){const o=typeof a=="undefined"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,n,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o=="undefined"?"offset":`${o}.offset`,u=typeof o=="undefined"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:n=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,n?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),_=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${_}"; options=${d};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Le.default=s,Le}var Zs;function bs(){if(Zs)return $e;Zs=1;var t=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});const e=t(Tr());class s extends e.default{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}in(i,n){const a=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:a,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${l}fts${u}.${n}`),this}match(i){return Object.entries(i).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(i,n,a){return this.url.searchParams.append(i,`not.${n}.${a}`),this}or(i,{foreignTable:n,referencedTable:a=n}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,n,a){return this.url.searchParams.append(i,`${n}.${a}`),this}}return $e.default=s,$e}var Qs;function Pr(){if(Qs)return Ie;Qs=1;var t=Ie&&Ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ie,"__esModule",{value:!0});const e=t(bs());class s{constructor(i,{headers:n={},schema:a,fetch:o}){this.url=i,this.headers=n,this.schema=a,this.fetch=o}select(i,{head:n=!1,count:a}={}){const o=n?"HEAD":"GET";let l=!1;const u=(i!=null?i:"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:n,defaultToNull:a=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:n,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${a?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const d=i.reduce((_,y)=>_.concat(Object.keys(y)),[]);if(d.length>0){const _=[...new Set(d)].map(y=>`"${y}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:n}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const n="DELETE",a=[];return i&&a.push(`count=${i}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ie.default=s,Ie}var st={},rt={},Xs;function qi(){return Xs||(Xs=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.version=void 0,rt.version="0.0.0-automated"),rt}var er;function zi(){if(er)return st;er=1,Object.defineProperty(st,"__esModule",{value:!0}),st.DEFAULT_HEADERS=void 0;const t=qi();return st.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},st}var tr;function Ji(){if(tr)return je;tr=1;var t=je&&je.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(je,"__esModule",{value:!0});const e=t(Pr()),s=t(bs()),r=zi();class i{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),o),this.schemaName=l,this.fetch=u}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:c}={}){let d;const _=new URL(`${this.url}/rpc/${a}`);let y;l||u?(d=l?"HEAD":"GET",Object.entries(o).filter(([E,w])=>w!==void 0).map(([E,w])=>[E,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([E,w])=>{_.searchParams.append(E,w)})):(d="POST",y=o);const v=Object.assign({},this.headers);return c&&(v.Prefer=`count=${c}`),new s.default({method:d,url:_,headers:v,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return je.default=i,je}var sr;function Ki(){if(sr)return $;sr=1;var t=$&&$.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty($,"__esModule",{value:!0}),$.PostgrestError=$.PostgrestBuilder=$.PostgrestTransformBuilder=$.PostgrestFilterBuilder=$.PostgrestQueryBuilder=$.PostgrestClient=void 0;const e=t(Ji());$.PostgrestClient=e.default;const s=t(Pr());$.PostgrestQueryBuilder=s.default;const r=t(bs());$.PostgrestFilterBuilder=r.default;const i=t(Tr());$.PostgrestTransformBuilder=i.default;const n=t(Or());$.PostgrestBuilder=n.default;const a=t(Sr());return $.PostgrestError=a.default,$.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:n.default,PostgrestError:a.default},$}var Zi=Ki();const Qi=Ni(Zi),{PostgrestClient:Xi,PostgrestQueryBuilder:$c,PostgrestFilterBuilder:Lc,PostgrestTransformBuilder:Yc,PostgrestBuilder:Uc,PostgrestError:Nc}=Qi,en="2.11.2",tn={"X-Client-Info":`realtime-js/${en}`},sn="1.0.0",Dr=1e4,rn=1e3;var Ge;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ge||(Ge={}));var B;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(B||(B={}));var K;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(K||(K={}));var as;(function(t){t.websocket="websocket"})(as||(as={}));var De;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(De||(De={}));class nn{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const i=s.getUint8(1),n=s.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+n));a=a+n;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Er{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var R;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(R||(R={}));const rr=(t,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,a)=>(n[a]=an(a,t,e,i),n),{})},an=(t,e,s,r)=>{const i=e.find(o=>o.name===t),n=i==null?void 0:i.type,a=s[t];return n&&!r.includes(n)?Mr(n,a):os(a)},Mr=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return cn(e,s)}switch(t){case R.bool:return on(e);case R.float4:case R.float8:case R.int2:case R.int4:case R.int8:case R.numeric:case R.oid:return ln(e);case R.json:case R.jsonb:return un(e);case R.timestamp:return hn(e);case R.abstime:case R.date:case R.daterange:case R.int4range:case R.int8range:case R.money:case R.reltime:case R.text:case R.time:case R.timestamptz:case R.timetz:case R.tsrange:case R.tstzrange:return os(e);default:return os(e)}},os=t=>t,on=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ln=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},un=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},cn=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let n;const a=t.slice(1,s);try{n=JSON.parse("["+a+"]")}catch(o){n=a?a.split(","):[]}return n.map(o=>Mr(e,o))}return t},hn=t=>typeof t=="string"?t.replace(" ","T"):t,Rr=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Jt{constructor(e,s,r={},i=Dr){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ir;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ir||(ir={}));class lt{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lt.syncState(this.state,i,n,a),this.pendingDiffs.forEach(l=>{this.state=lt.syncDiff(this.state,l,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=lt.syncDiff(this.state,i,n,a),o())}),this.onJoin((i,n,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:a})}),this.onLeave((i,n,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const n=this.cloneDeep(e),a=this.transformState(s),o={},l={};return this.map(n,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=n[u];if(d){const _=c.map(w=>w.presence_ref),y=d.map(w=>w.presence_ref),v=c.filter(w=>y.indexOf(w.presence_ref)<0),E=d.filter(w=>_.indexOf(w.presence_ref)<0);v.length>0&&(o[u]=v),E.length>0&&(l[u]=E)}else o[u]=c}),this.syncDiff(n,{joins:o,leaves:l},r,i)}static syncDiff(e,s,r,i){const{joins:n,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(y=>y.presence_ref),_=c.filter(y=>d.indexOf(y.presence_ref)<0);e[o].unshift(..._)}r(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nr;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nr||(nr={}));var ar;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ar||(ar={}));var le;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(le||(le={}));class ks{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=B.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Jt(this,K.join,this.params,this.timeout),this.rejoinTimer=new Er(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=B.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=B.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this._on(K.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new lt(this),this.broadcastEndpointURL=Rr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:n,presence:a,private:o}}=this.params;this._onError(c=>e==null?void 0:e(le.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(le.CLOSED));const l={},u={broadcast:n,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:c}){var _;if(this.socket.setAuth(),c===void 0){e==null||e(le.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(_=y==null?void 0:y.length)!==null&&_!==void 0?_:0,E=[];for(let w=0;w<v;w++){const Y=y[w],{filter:{event:te,schema:U,table:N,filter:J}}=Y,Ce=c&&c[w];if(Ce&&Ce.event===te&&Ce.schema===U&&Ce.table===N&&Ce.filter===J)E.push(Object.assign(Object.assign({},Y),{id:Ce.id}));else{this.unsubscribe(),e==null||e(le.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(le.SUBSCRIBED);return}})).receive("error",c=>{e==null||e(le.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(le.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(e,s={}){return yield this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,s,r){return this._on(e,s,r)}send(r){return h(this,arguments,function*(e,s={}){var i,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=yield this._fetchWithTimeout(this.broadcastEndpointURL,u,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return yield(n=c.body)===null||n===void 0?void 0:n.cancel(),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,u;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=B.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(K.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Jt(this,K.leave,{},e);i.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_fetchWithTimeout(e,s,r){return h(this,null,function*(){const i=new AbortController,n=setTimeout(()=>i.abort(),r),a=yield this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(n),a})}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Jt(this,e,s,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,n;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=K;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,s,r);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var v,E,w;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(E=y.filter)===null||E===void 0?void 0:E.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(y=>y.callback(_,r)):(n=this.bindings[a])===null||n===void 0||n.filter(y=>{var v,E,w,Y,te,U;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const N=y.id,J=(v=y.filter)===null||v===void 0?void 0:v.event;return N&&((E=s.ids)===null||E===void 0?void 0:E.includes(N))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(te=(Y=y==null?void 0:y.filter)===null||Y===void 0?void 0:Y.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return N==="*"||N===((U=s==null?void 0:s.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof _=="object"&&"ids"in _){const v=_.data,{schema:E,table:w,commit_timestamp:Y,type:te,errors:U}=v;_=Object.assign(Object.assign({},{schema:E,table:w,commit_timestamp:Y,eventType:te,new:{},old:{},errors:U}),this._getPayloadRecords(v))}y.callback(_,r)})}_isClosed(){return this.state===B.closed}_isJoined(){return this.state===B.joined}_isJoining(){return this.state===B.joining}_isLeaving(){return this.state===B.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),n={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&ks.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(K.close,{},e)}_onError(e){this._on(K.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=B.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=rr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=rr(e.columns,e.old_record)),s}}const dn=()=>{},fn=typeof WebSocket!="undefined",_n=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mn{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=tn,this.params={},this.timeout=Dr,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=dn,this.conn=null,this.sendBuffer=[],this.serializer=new nn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let a;return n?a=n:typeof fetch=="undefined"?a=(...o)=>Ke(()=>h(this,null,function*(){const{default:l}=yield Promise.resolve().then(()=>Qe);return{default:l}}),void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${as.websocket}`,this.httpEndpoint=Rr(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(n,a)=>a(JSON.stringify(n)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Er(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(fn){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new yn(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ke(()=>h(this,null,function*(){const{default:e}=yield import("./browser.js").then(s=>s.b);return{default:e}}),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sn}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s!=null?s:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){const s=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),s})}removeAllChannels(){return h(this,null,function*(){const e=yield Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e})}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ge.connecting:return De.Connecting;case Ge.open:return De.Open;case Ge.closing:return De.Closing;default:return De.Closed}}isConnected(){return this.connectionState()===De.Open}channel(e,s={config:{}}){const r=new ks(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:i,ref:n}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${s} ${r} (${n})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e=null){return h(this,null,function*(){let s=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(s){let r=null;try{r=JSON.parse(atob(s.split(".")[1]))}catch(i){}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=s,this.channels.forEach(i=>{s&&i.updateJoinPayload({access_token:s}),i.joinedOnce&&i._isJoined()&&i._push(K.access_token,{access_token:s})})}})}sendHeartbeat(){return h(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(rn,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:i,payload:n,ref:a}=s;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,n),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,n,a)),this.stateChangeCallbacks.message.forEach(o=>o(s))})}_onConnOpen(){return h(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(K.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([_n],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class yn{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ge.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Ss extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function L(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class gn extends Ss{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ls extends Ss{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var pn=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const xr=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...s)=>Ke(()=>h(void 0,null,function*(){const{default:r}=yield Promise.resolve().then(()=>Qe);return{default:r}}),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},vn=()=>pn(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield Ke(()=>Promise.resolve().then(()=>Qe),void 0)).Response:Response}),us=t=>{if(Array.isArray(t))return t.map(s=>us(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const i=s.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=us(r)}),e};var Re=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Kt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wn=(t,e,s)=>Re(void 0,void 0,void 0,function*(){const r=yield vn();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{e(new gn(Kt(i),t.status||500))}).catch(i=>{e(new ls(Kt(i),i))}):e(new ls(Kt(t),t))}),bn=(t,e,s,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),s))};function yt(t,e,s,r,i,n){return Re(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(s,bn(e,r,i,n)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>wn(l,o,r))})})}function xt(t,e,s,r){return Re(this,void 0,void 0,function*(){return yt(t,"GET",e,s,r)})}function ve(t,e,s,r,i){return Re(this,void 0,void 0,function*(){return yt(t,"POST",e,r,i,s)})}function kn(t,e,s,r,i){return Re(this,void 0,void 0,function*(){return yt(t,"PUT",e,r,i,s)})}function Sn(t,e,s,r){return Re(this,void 0,void 0,function*(){return yt(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Ar(t,e,s,r,i){return Re(this,void 0,void 0,function*(){return yt(t,"DELETE",e,r,i,s)})}var W=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const On={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},or={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tn{constructor(e,s={},r,i){this.url=e,this.headers=s,this.bucketId=r,this.fetch=xr(i)}uploadOrUpdate(e,s,r,i){return W(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},or),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob!="undefined"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),l&&n.append("metadata",this.encodeMetadata(l)),n.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),l&&n.append("metadata",this.encodeMetadata(l))):(n=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:n,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),_=yield d.json();return d.ok?{data:{path:u,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(n){if(L(n))return{data:null,error:n};throw n}})}upload(e,s,r){return W(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,i){return W(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",s);try{let l;const u=Object.assign({upsert:or.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob!="undefined"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),_=yield d.json();return d.ok?{data:{path:n,fullPath:_.Key},error:null}:{data:null,error:_}}catch(l){if(L(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return W(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const n=yield ve(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new Ss("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}})}update(e,s,r){return W(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return W(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(L(i))return{data:null,error:i};throw i}})}copy(e,s,r){return W(this,void 0,void 0,function*(){try{return{data:{path:(yield ve(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(L(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,r){return W(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield ve(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(i){if(L(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,r){return W(this,void 0,void 0,function*(){try{const i=yield ve(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(i){if(L(i))return{data:null,error:i};throw i}})}download(e,s){return W(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)!="undefined"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=n?`?${n}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield xt(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(L(o))return{data:null,error:o};throw o}})}info(e){return W(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield xt(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:us(r),error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}})}exists(e){return W(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Sn(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(L(r)&&r instanceof ls){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),i=[],n=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";n!==""&&i.push(n);const o=typeof(s==null?void 0:s.transform)!="undefined"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return W(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}})}list(e,s,r){return W(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},On),s),{prefix:e||""});return{data:yield ve(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(L(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer!="undefined"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Pn="2.7.1",Dn={"X-Client-Info":`storage-js/${Pn}`};var Ue=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class En{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Dn),s),this.fetch=xr(r)}listBuckets(){return Ue(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(L(e))return{data:null,error:e};throw e}})}getBucket(e){return Ue(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ue(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Ue(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ue(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ue(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}})}}class Mn extends En{constructor(e,s={},r){super(e,s,r)}from(e){return new Tn(this.url,this.headers,e,this.fetch)}}const Rn="2.49.1";let ot="";typeof Deno!="undefined"?ot="deno":typeof document!="undefined"?ot="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?ot="react-native":ot="node";const xn={"X-Client-Info":`supabase-js-${ot}/${Rn}`},An={headers:xn},Cn={schema:"public"},jn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},In={};var $n=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Ln=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=br:e=fetch,(...s)=>e(...s)},Yn=()=>typeof Headers=="undefined"?kr:Headers,Un=(t,e,s)=>{const r=Ln(s),i=Yn();return(n,a)=>$n(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},a),{headers:u}))})};var Nn=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};function Fn(t){return t.replace(/\/$/,"")}function Wn(t,e){const{db:s,auth:r,realtime:i,global:n}=t,{db:a,auth:o,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),n),accessToken:()=>Nn(this,void 0,void 0,function*(){return""})};return t.accessToken?c.accessToken=t.accessToken:delete c.accessToken,c}const Cr="2.68.0",He=30*1e3,cs=3,Zt=cs*He,Hn="http://localhost:9999",Bn="supabase.auth.token",Vn={"X-Client-Info":`gotrue-js/${Cr}`},hs="X-Supabase-Api-Version",jr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Gn(t){return Math.round(Date.now()/1e3)+t}function qn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const se=()=>typeof window!="undefined"&&typeof document!="undefined",Oe={tested:!1,writable:!1},ut=()=>{if(!se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(e){return!1}if(Oe.tested)return Oe.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Oe.tested=!0,Oe.writable=!0}catch(e){Oe.tested=!0,Oe.writable=!1}return Oe.writable};function zn(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch(r){}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const Ir=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...s)=>Ke(()=>h(void 0,null,function*(){const{default:r}=yield Promise.resolve().then(()=>Qe);return{default:r}}),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Jn=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",$r=(t,e,s)=>h(void 0,null,function*(){yield t.setItem(e,JSON.stringify(s))}),kt=(t,e)=>h(void 0,null,function*(){const s=yield t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}}),St=(t,e)=>h(void 0,null,function*(){yield t.removeItem(e)});function Kn(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,i,n,a,o,l,u,c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)a=e.indexOf(t.charAt(c++)),o=e.indexOf(t.charAt(c++)),l=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),r=a<<2|o>>4,i=(o&15)<<4|l>>2,n=(l&3)<<6|u,s=s+String.fromCharCode(r),l!=64&&i!=0&&(s=s+String.fromCharCode(i)),u!=64&&n!=0&&(s=s+String.fromCharCode(n));return s}class Lt{constructor(){this.promise=new Lt.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Lt.promiseConstructor=Promise;function lr(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(Kn(r))}function Zn(t){return h(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),t)})})}function Qn(t,e){return new Promise((r,i)=>{h(this,null,function*(){for(let n=0;n<1/0;n++)try{const a=yield t(n);if(!e(n,null,a)){r(a);return}}catch(a){if(!e(n,a)){i(a);return}}})})}function Xn(t){return("0"+t.toString(16)).substr(-2)}function ea(){const e=new Uint32Array(56);if(typeof crypto=="undefined"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let n=0;n<56;n++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Xn).join("")}function ta(t){return h(this,null,function*(){const s=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")})}function sa(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ra(t){return h(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=yield ta(t);return sa(s)})}function Ne(t,e,s=!1){return h(this,null,function*(){const r=ea();let i=r;s&&(i+="/PASSWORD_RECOVERY"),yield $r(t,`${e}-code-verifier`,i);const n=yield ra(r);return[n,r===n?"plain":"s256"]})}const ia=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function na(t){const e=t.headers.get(hs);if(!e||!e.match(ia))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch(s){return null}}class Os extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function k(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class aa extends Os{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function oa(t){return k(t)&&t.name==="AuthApiError"}class Lr extends Os{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class xe extends Os{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class ge extends xe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function la(t){return k(t)&&t.name==="AuthSessionMissingError"}class Qt extends xe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ot extends xe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tt extends xe{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ua(t){return k(t)&&t.name==="AuthImplicitGrantRedirectError"}class ur extends xe{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ds extends xe{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Xt(t){return k(t)&&t.name==="AuthRetryableFetchError"}class cr extends xe{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var ca=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};const Pe=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ha=[502,503,504];function hr(t){return h(this,null,function*(){var e;if(!Jn(t))throw new ds(Pe(t),0);if(ha.includes(t.status))throw new ds(Pe(t),t.status);let s;try{s=yield t.json()}catch(n){throw new Lr(Pe(n),n)}let r;const i=na(t);if(i&&i.getTime()>=jr["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new cr(Pe(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ge}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0))throw new cr(Pe(s),t.status,s.weak_password.reasons);throw new aa(Pe(s),t.status||500,r)})}const da=(t,e,s,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};function O(t,e,s,r){return h(this,null,function*(){var i;const n=Object.assign({},r==null?void 0:r.headers);n[hs]||(n[hs]=jr["2024-01-01"].name),r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=yield fa(t,e,s+o,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function fa(t,e,s,r,i,n){return h(this,null,function*(){const a=da(e,r,i,n);let o;try{o=yield t(s,Object.assign({},a))}catch(l){throw console.error(l),new ds(Pe(l),0)}if(o.ok||(yield hr(o)),r!=null&&r.noResolveJson)return o;try{return yield o.json()}catch(l){yield hr(l)}})}function pe(t){var e;let s=null;ga(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Gn(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function dr(t){const e=pe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function we(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _a(t){return{data:t,error:null}}function ma(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n}=t,a=ca(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function ya(t){return t}function ga(t){return t.access_token&&t.refresh_token&&t.expires_in}var pa=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};class va{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=Ir(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,s="global"){return h(this,null,function*(){try{return yield O(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(k(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(e,s={}){try{return yield O(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:we})}catch(i){if(k(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return h(this,null,function*(){try{const{options:s}=e,r=pa(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),yield O(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ma,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(k(s))return{data:{properties:null,user:null},error:s};throw s}})}createUser(e){return h(this,null,function*(){try{return yield O(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:we})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}})}listUsers(e){return h(this,null,function*(){var s,r,i,n,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=yield O(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:ya});if(c.error)throw c.error;const d=yield c.json(),_=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(v=>{const E=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=E}),u.total=parseInt(_)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(k(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return h(this,null,function*(){try{return yield O(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:we})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}})}updateUserById(e,s){return h(this,null,function*(){try{return yield O(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:we})}catch(r){if(k(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,s=!1){return h(this,null,function*(){try{return yield O(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:we})}catch(r){if(k(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return h(this,null,function*(){try{const{data:s,error:r}=yield O(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(k(s))return{data:null,error:s};throw s}})}_deleteFactor(e){return h(this,null,function*(){try{return{data:yield O(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(k(s))return{data:null,error:s};throw s}})}}const wa={getItem:t=>ut()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ut()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ut()&&globalThis.localStorage.removeItem(t)}};function fr(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function ba(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(t){typeof self!="undefined"&&(self.globalThis=self)}}const Fe={debug:!!(globalThis&&ut()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ka extends Yr{}function Sa(t,e,s){return h(this,null,function*(){Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>h(this,null,function*(){if(i){Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield s()}finally{Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ka(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fe.debug)try{const n=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield s()}})))})}ba();const Oa={url:Hn,storageKey:Bn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function _r(t,e,s){return h(this,null,function*(){return yield s()})}class ht{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ht.nextInstanceID,ht.nextInstanceID+=1,this.instanceID>0&&se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Oa),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new va({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ir(i.fetch),this.lock=i.lock||_r,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:se()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Sa:this.lock=_r,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:ut()?this.storage=wa:(this.memoryStorage={},this.storage=fr(this.memoryStorage)):(this.memoryStorage={},this.storage=fr(this.memoryStorage)),se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",n=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",n),yield this._notifyAllSubscribers(n.data.event,n.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cr}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{const s=zn(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":(yield this._isPKCECallback(s))&&(r="pkce"),se()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:n}=yield this._getSessionFromURL(s,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),ua(n)){const l=(e=n.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:n}}return yield this._removeSession(),{error:n}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(s){return k(s)?{error:s}:{error:new Lr("Unexpected error during initialization",s)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var s,r,i;try{const n=yield O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:pe}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(k(n))return{data:{user:null,session:null},error:n};throw n}})}signUp(e){return h(this,null,function*(){var s,r,i;try{let n;if("email"in e){const{email:c,password:d,options:_}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=yield Ne(this.storage,this.storageKey)),n=yield O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:c,password:d,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:y,code_challenge_method:v},xform:pe})}else if("phone"in e){const{phone:c,password:d,options:_}=e;n=yield O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(i=_==null?void 0:_.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:pe})}else throw new Ot("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(k(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithPassword(e){return h(this,null,function*(){try{let s;if("email"in e){const{email:n,password:a,options:o}=e;s=yield O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dr})}else if("phone"in e){const{phone:n,password:a,options:o}=e;s=yield O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dr})}else throw new Ot("You must provide either an email or phone number and a password");const{data:r,error:i}=s;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Qt}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithOAuth(e){return h(this,null,function*(){var s,r,i,n;return yield this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return h(this,null,function*(){const s=yield kt(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s!=null?s:"").split("/");try{const{data:n,error:a}=yield O(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:pe});if(yield St(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Qt}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i!=null?i:null}),error:a})}catch(n){if(k(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}})}signInWithIdToken(e){return h(this,null,function*(){try{const{options:s,provider:r,token:i,access_token:n,nonce:a}=e,o=yield O(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:pe}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Qt}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithOtp(e){return h(this,null,function*(){var s,r,i,n,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=yield Ne(this.storage,this.storageKey));const{error:d}=yield O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=yield O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ot("You must provide either an email or phone number.")}catch(o){if(k(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(e){return h(this,null,function*(){var s,r;try{let i,n;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=yield O(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:pe});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(k(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){return h(this,null,function*(){var s,r,i;try{let n=null,a=null;return this.flowType==="pkce"&&([n,a]=yield Ne(this.storage,this.storageKey)),yield O(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:_a})}catch(n){if(k(n))return{data:null,error:n};throw n}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new ge;const{error:i}=yield O(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}}))}catch(e){if(k(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:n}=e,{error:a}=yield O(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:n}=e,{data:a,error:o}=yield O(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Ot("You must provide either an email or phone number and a type")}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(s=>h(this,null,function*(){return s}))}))})}_acquireLock(e,s){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=h(this,null,function*(){return yield r,yield s()});return this.pendingInLock.push(h(this,null,function*(){try{yield i}catch(n){}})),i}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push(h(this,null,function*(){try{yield r}catch(i){}})),yield r;this.pendingInLock.length;){const i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{const s=yield this.__loadSession();return yield e(s)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=yield kt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Zt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:we}):yield this._useSession(s=>h(this,null,function*(){var r,i,n;const{data:a,error:o}=s;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ge}:yield O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:we})}))}catch(s){if(k(s))return la(s)&&(yield this._removeSession(),yield St(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}})}updateUser(r){return h(this,arguments,function*(e,s={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,s)}))})}_updateUser(r){return h(this,arguments,function*(e,s={}){try{return yield this._useSession(i=>h(this,null,function*(){const{data:n,error:a}=i;if(a)throw a;if(!n.session)throw new ge;const o=n.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=yield Ne(this.storage,this.storageKey));const{data:c,error:d}=yield O(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:we});if(d)throw d;return o.user=c.user,yield this._saveSession(o),yield this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}}))}catch(i){if(k(i))return{data:{user:null},error:i};throw i}})}_decodeJWT(e){return lr(e)}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new ge;const s=Date.now()/1e3;let r=s,i=!0,n=null;const a=lr(e.access_token);if(a.exp&&(r=a.exp,i=r<=s),i){const{session:o,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};n=o}else{const{data:o,error:l}=yield this._getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-s,expires_at:r},yield this._saveSession(n),yield this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(s){if(k(s))return{data:{session:null,user:null},error:s};throw s}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){var r;if(!e){const{data:a,error:o}=s;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ge;const{session:i,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}})}_getSessionFromURL(e,s){return h(this,null,function*(){try{if(!se())throw new Tt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ur("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tt("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ur("No code detected.");const{data:te,error:U}=yield this._exchangeCodeForSession(e.code);if(U)throw U;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:n,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!n||!o||!a||!u)throw new Tt("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let _=c+d;l&&(_=parseInt(l));const y=_-c;y*1e3<=He&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${d}s`);const v=_-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,_,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,_,c);const{data:E,error:w}=yield this._getUser(n);if(w)throw w;const Y={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:d,expires_at:_,refresh_token:a,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Y,redirectType:e.type},error:null}}catch(r){if(k(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){const s=yield kt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(s=>h(this,null,function*(){var r;const{data:i,error:n}=s;if(n)return{error:n};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=yield this.admin.signOut(a,e);if(o&&!(oa(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(yield this._removeSession(),yield St(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){const s=qn(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(s)}))}),{data:{subscription:r}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(s=>h(this,null,function*(){var r,i;try{const{data:{session:n},error:a}=s;if(a)throw a;yield(r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}}))})}resetPasswordForEmail(r){return h(this,arguments,function*(e,s={}){let i=null,n=null;this.flowType==="pkce"&&([i,n]=yield Ne(this.storage,this.storageKey,!0));try{return yield O(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(k(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{const{data:s,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(k(s))return{data:null,error:s};throw s}})}linkIdentity(e){return h(this,null,function*(){var s;try{const{data:r,error:i}=yield this._useSession(n=>h(this,null,function*(){var a,o,l,u,c;const{data:d,error:_}=n;if(_)throw _;const y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield O(this.fetch,"GET",y,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})}));if(i)throw i;return se()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(k(r))return{data:{provider:e.provider,url:null},error:r};throw r}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){var r,i;const{data:n,error:a}=s;if(a)throw a;return yield O(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})}))}catch(s){if(k(s))return{data:null,error:s};throw s}})}_refreshAccessToken(e){return h(this,null,function*(){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return yield Qn(i=>h(this,null,function*(){return i>0&&(yield Zn(200*Math.pow(2,i-1))),this._debug(s,"refreshing attempt",i),yield O(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pe})}),(i,n)=>{const a=200*Math.pow(2,i);return n&&Xt(n)&&Date.now()+a-r<He})}catch(r){if(this._debug(s,"error",r),k(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,s){return h(this,null,function*(){const r=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),se()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=yield kt(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&(yield this._removeSession());return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Zt;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Zt}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:n}=yield this._callRefreshToken(r.refresh_token);n&&(console.error(n),Xt(n)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",n),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var s,r;if(!e)throw new ge;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Lt;const{data:n,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new ge;yield this._saveSession(n.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(i,"error",n),k(n)){const a={session:null,error:n};return Xt(n)||(yield this._removeSession()),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(e,s,r=!0){return h(this,null,function*(){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(o=>h(this,null,function*(){try{yield o.callback(e,s)}catch(l){n.push(l)}}));if(yield Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(i,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield $r(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield St(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),He);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{const e=Date.now();try{return yield this._useSession(s=>h(this,null,function*(){const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/He);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${He}ms, refresh threshold is ${cs} ticks`),i<=cs&&(yield this._callRefreshToken(r.refresh_token))}))}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Yr)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,s,r){return h(this,null,function*(){const i=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,a]=yield Ne(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const n=new URLSearchParams(r.queryParams);i.push(n.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){var r;const{data:i,error:n}=s;return n?{data:null,error:n}:yield O(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})}))}catch(s){if(k(s))return{data:null,error:s};throw s}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){var r,i;const{data:n,error:a}=s;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=yield O(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(s){if(k(s))return{data:null,error:s};throw s}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){var r;const{data:i,error:n}=s;if(n)return{data:null,error:n};const{data:a,error:o}=yield O(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})}))}catch(s){if(k(s))return{data:null,error:s};throw s}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){var r;const{data:i,error:n}=s;return n?{data:null,error:n}:yield O(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})}))}catch(s){if(k(s))return{data:null,error:s};throw s}}))})}_challengeAndVerify(e){return h(this,null,function*(){const{data:s,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})})}_listFactors(){return h(this,null,function*(){const{data:{user:e},error:s}=yield this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),n=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:n},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var s,r;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(s=i.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}))})}}ht.nextInstanceID=0;const Ta=ht;class Pa extends Ta{constructor(e){super(e)}}var Da=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?n(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class Ea{constructor(e,s,r){var i,n,a;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const o=Fn(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Cn,realtime:In,auth:Object.assign(Object.assign({},jn),{storageKey:l}),global:An},c=Wn(r!=null?r:{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=c.global.headers)!==null&&n!==void 0?n:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=Un(s,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Xi(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ui(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Mn(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Da(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,storageKey:n,flowType:a,lock:o,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pa({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:n,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new mn(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ma=(t,e,s)=>new Ea(t,e,s);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Ur;function m(){return Ur.apply(null,arguments)}function Ra(t){Ur=t}function Q(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Me(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ts(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(P(t,e))return!1;return!0}function H(t){return t===void 0}function _e(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function gt(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Nr(t,e){var s=[],r,i=t.length;for(r=0;r<i;++r)s.push(e(t[r],r));return s}function be(t,e){for(var s in e)P(e,s)&&(t[s]=e[s]);return P(e,"toString")&&(t.toString=e.toString),P(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ne(t,e,s,r){return ui(t,e,s,r,!0).utc()}function xa(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function b(t){return t._pf==null&&(t._pf=xa()),t._pf}var fs;Array.prototype.some?fs=Array.prototype.some:fs=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function Ps(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=b(t),s=fs.call(e.parsedDateParts,function(i){return i!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function Yt(t){var e=ne(NaN);return t!=null?be(b(e),t):b(e).userInvalidated=!0,e}var mr=m.momentProperties=[],es=!1;function Ds(t,e){var s,r,i,n=mr.length;if(H(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),H(e._i)||(t._i=e._i),H(e._f)||(t._f=e._f),H(e._l)||(t._l=e._l),H(e._strict)||(t._strict=e._strict),H(e._tzm)||(t._tzm=e._tzm),H(e._isUTC)||(t._isUTC=e._isUTC),H(e._offset)||(t._offset=e._offset),H(e._pf)||(t._pf=b(e)),H(e._locale)||(t._locale=e._locale),n>0)for(s=0;s<n;s++)r=mr[s],i=e[r],H(i)||(t[r]=i);return t}function pt(t){Ds(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),es===!1&&(es=!0,m.updateOffset(this),es=!1)}function X(t){return t instanceof pt||t!=null&&t._isAMomentObject!=null}function Fr(t){m.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+t)}function q(t,e){var s=!0;return be(function(){if(m.deprecationHandler!=null&&m.deprecationHandler(null,t),s){var r=[],i,n,a,o=arguments.length;for(n=0;n<o;n++){if(i="",typeof arguments[n]=="object"){i+=`
[`+n+"] ";for(a in arguments[0])P(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[n];r.push(i)}Fr(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var yr={};function Wr(t,e){m.deprecationHandler!=null&&m.deprecationHandler(t,e),yr[t]||(Fr(e),yr[t]=!0)}m.suppressDeprecationWarnings=!1;m.deprecationHandler=null;function ae(t){return typeof Function!="undefined"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Aa(t){var e,s;for(s in t)P(t,s)&&(e=t[s],ae(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function _s(t,e){var s=be({},t),r;for(r in e)P(e,r)&&(Me(t[r])&&Me(e[r])?(s[r]={},be(s[r],t[r]),be(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)P(t,r)&&!P(e,r)&&Me(t[r])&&(s[r]=be({},s[r]));return s}function Es(t){t!=null&&this.set(t)}var ms;Object.keys?ms=Object.keys:ms=function(t){var e,s=[];for(e in t)P(t,e)&&s.push(e);return s};var Ca={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ja(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return ae(r)?r.call(e,s):r}function ie(t,e,s){var r=""+Math.abs(t),i=e-r.length,n=t>=0;return(n?s?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Ms=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Pt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ts={},qe={};function p(t,e,s,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(qe[t]=i),e&&(qe[e[0]]=function(){return ie(i.apply(this,arguments),e[1],e[2])}),s&&(qe[s]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function Ia(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $a(t){var e=t.match(Ms),s,r;for(s=0,r=e.length;s<r;s++)qe[e[s]]?e[s]=qe[e[s]]:e[s]=Ia(e[s]);return function(i){var n="",a;for(a=0;a<r;a++)n+=ae(e[a])?e[a].call(i,t):e[a];return n}}function Et(t,e){return t.isValid()?(e=Hr(e,t.localeData()),ts[e]=ts[e]||$a(e),ts[e](t)):t.localeData().invalidDate()}function Hr(t,e){var s=5;function r(i){return e.longDateFormat(i)||i}for(Pt.lastIndex=0;s>=0&&Pt.test(t);)t=t.replace(Pt,r),Pt.lastIndex=0,s-=1;return t}var La={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ya(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(Ms).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Ua="Invalid date";function Na(){return this._invalidDate}var Fa="%d",Wa=/\d{1,2}/;function Ha(t){return this._ordinal.replace("%d",t)}var Ba={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Va(t,e,s,r){var i=this._relativeTime[s];return ae(i)?i(t,e,s,r):i.replace(/%d/i,t)}function Ga(t,e){var s=this._relativeTime[t>0?"future":"past"];return ae(s)?s(e):s.replace(/%s/i,e)}var gr={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function z(t){return typeof t=="string"?gr[t]||gr[t.toLowerCase()]:void 0}function Rs(t){var e={},s,r;for(r in t)P(t,r)&&(s=z(r),s&&(e[s]=t[r]));return e}var qa={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function za(t){var e=[],s;for(s in t)P(t,s)&&e.push({unit:s,priority:qa[s]});return e.sort(function(r,i){return r.priority-i.priority}),e}var Br=/\d/,V=/\d\d/,Vr=/\d{3}/,xs=/\d{4}/,Ut=/[+-]?\d{6}/,A=/\d\d?/,Gr=/\d\d\d\d?/,qr=/\d\d\d\d\d\d?/,Nt=/\d{1,3}/,As=/\d{1,4}/,Ft=/[+-]?\d{1,6}/,Xe=/\d+/,Wt=/[+-]?\d+/,Ja=/Z|[+-]\d\d:?\d\d/gi,Ht=/Z|[+-]\d\d(?::?\d\d)?/gi,Ka=/[+-]?\d+(\.\d{1,3})?/,vt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,et=/^[1-9]\d?/,Cs=/^([1-9]\d|\d)/,At;At={};function g(t,e,s){At[t]=ae(e)?e:function(r,i){return r&&s?s:e}}function Za(t,e){return P(At,t)?At[t](e._strict,e._locale):new RegExp(Qa(t))}function Qa(t){return de(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,i,n){return s||r||i||n}))}function de(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function S(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=G(e)),s}var ys={};function M(t,e){var s,r=e,i;for(typeof t=="string"&&(t=[t]),_e(e)&&(r=function(n,a){a[e]=S(n)}),i=t.length,s=0;s<i;s++)ys[t[s]]=r}function wt(t,e){M(t,function(s,r,i,n){i._w=i._w||{},e(s,i._w,i,n)})}function Xa(t,e,s){e!=null&&P(ys,t)&&ys[t](e,s._a,s,t)}function Bt(t){return t%4===0&&t%100!==0||t%400===0}var F=0,ce=1,re=2,I=3,Z=4,he=5,Ee=6,eo=7,to=8;p("Y",0,0,function(){var t=this.year();return t<=9999?ie(t,4):"+"+t});p(0,["YY",2],0,function(){return this.year()%100});p(0,["YYYY",4],0,"year");p(0,["YYYYY",5],0,"year");p(0,["YYYYYY",6,!0],0,"year");g("Y",Wt);g("YY",A,V);g("YYYY",As,xs);g("YYYYY",Ft,Ut);g("YYYYYY",Ft,Ut);M(["YYYYY","YYYYYY"],F);M("YYYY",function(t,e){e[F]=t.length===2?m.parseTwoDigitYear(t):S(t)});M("YY",function(t,e){e[F]=m.parseTwoDigitYear(t)});M("Y",function(t,e){e[F]=parseInt(t,10)});function ct(t){return Bt(t)?366:365}m.parseTwoDigitYear=function(t){return S(t)+(S(t)>68?1900:2e3)};var zr=tt("FullYear",!0);function so(){return Bt(this.year())}function tt(t,e){return function(s){return s!=null?(Jr(this,t,s),m.updateOffset(this,e),this):dt(this,t)}}function dt(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Jr(t,e,s){var r,i,n,a,o;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(i?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(i?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(i?r.setUTCHours(s):r.setHours(s));case"Date":return void(i?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}n=s,a=t.month(),o=t.date(),o=o===29&&a===1&&!Bt(n)?28:o,i?r.setUTCFullYear(n,a,o):r.setFullYear(n,a,o)}}function ro(t){return t=z(t),ae(this[t])?this[t]():this}function io(t,e){if(typeof t=="object"){t=Rs(t);var s=za(t),r,i=s.length;for(r=0;r<i;r++)this[s[r].unit](t[s[r].unit])}else if(t=z(t),ae(this[t]))return this[t](e);return this}function no(t,e){return(t%e+e)%e}var j;Array.prototype.indexOf?j=Array.prototype.indexOf:j=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function js(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=no(e,12);return t+=(e-s)/12,s===1?Bt(t)?29:28:31-s%7%2}p("M",["MM",2],"Mo",function(){return this.month()+1});p("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});p("MMMM",0,0,function(t){return this.localeData().months(this,t)});g("M",A,et);g("MM",A,V);g("MMM",function(t,e){return e.monthsShortRegex(t)});g("MMMM",function(t,e){return e.monthsRegex(t)});M(["M","MM"],function(t,e){e[ce]=S(t)-1});M(["MMM","MMMM"],function(t,e,s,r){var i=s._locale.monthsParse(t,r,s._strict);i!=null?e[ce]=i:b(s).invalidMonth=t});var ao="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Kr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,oo=vt,lo=vt;function uo(t,e){return t?Q(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Zr).test(e)?"format":"standalone"][t.month()]:Q(this._months)?this._months:this._months.standalone}function co(t,e){return t?Q(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Zr.test(e)?"format":"standalone"][t.month()]:Q(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ho(t,e,s){var r,i,n,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)n=ne([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(n,"").toLocaleLowerCase();return s?e==="MMM"?(i=j.call(this._shortMonthsParse,a),i!==-1?i:null):(i=j.call(this._longMonthsParse,a),i!==-1?i:null):e==="MMM"?(i=j.call(this._shortMonthsParse,a),i!==-1?i:(i=j.call(this._longMonthsParse,a),i!==-1?i:null)):(i=j.call(this._longMonthsParse,a),i!==-1?i:(i=j.call(this._shortMonthsParse,a),i!==-1?i:null))}function fo(t,e,s){var r,i,n;if(this._monthsParseExact)return ho.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=ne([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(n.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function Qr(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=S(e);else if(e=t.localeData().monthsParse(e),!_e(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,js(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function Xr(t){return t!=null?(Qr(this,t),m.updateOffset(this,!0),this):dt(this,"Month")}function _o(){return js(this.year(),this.month())}function mo(t){return this._monthsParseExact?(P(this,"_monthsRegex")||ei.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(P(this,"_monthsShortRegex")||(this._monthsShortRegex=oo),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function yo(t){return this._monthsParseExact?(P(this,"_monthsRegex")||ei.call(this),t?this._monthsStrictRegex:this._monthsRegex):(P(this,"_monthsRegex")||(this._monthsRegex=lo),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ei(){function t(l,u){return u.length-l.length}var e=[],s=[],r=[],i,n,a,o;for(i=0;i<12;i++)n=ne([2e3,i]),a=de(this.monthsShort(n,"")),o=de(this.months(n,"")),e.push(a),s.push(o),r.push(o),r.push(a);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function go(t,e,s,r,i,n,a){var o;return t<100&&t>=0?(o=new Date(t+400,e,s,r,i,n,a),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,s,r,i,n,a),o}function ft(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ct(t,e,s){var r=7+e-s,i=(7+ft(t,0,r).getUTCDay()-e)%7;return-i+r-1}function ti(t,e,s,r,i){var n=(7+s-r)%7,a=Ct(t,r,i),o=1+7*(e-1)+n+a,l,u;return o<=0?(l=t-1,u=ct(l)+o):o>ct(t)?(l=t+1,u=o-ct(t)):(l=t,u=o),{year:l,dayOfYear:u}}function _t(t,e,s){var r=Ct(t.year(),e,s),i=Math.floor((t.dayOfYear()-r-1)/7)+1,n,a;return i<1?(a=t.year()-1,n=i+fe(a,e,s)):i>fe(t.year(),e,s)?(n=i-fe(t.year(),e,s),a=t.year()+1):(a=t.year(),n=i),{week:n,year:a}}function fe(t,e,s){var r=Ct(t,e,s),i=Ct(t+1,e,s);return(ct(t)-r+i)/7}p("w",["ww",2],"wo","week");p("W",["WW",2],"Wo","isoWeek");g("w",A,et);g("ww",A,V);g("W",A,et);g("WW",A,V);wt(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=S(t)});function po(t){return _t(t,this._week.dow,this._week.doy).week}var vo={dow:0,doy:6};function wo(){return this._week.dow}function bo(){return this._week.doy}function ko(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function So(t){var e=_t(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}p("d",0,"do","day");p("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});p("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});p("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});p("e",0,0,"weekday");p("E",0,0,"isoWeekday");g("d",A);g("e",A);g("E",A);g("dd",function(t,e){return e.weekdaysMinRegex(t)});g("ddd",function(t,e){return e.weekdaysShortRegex(t)});g("dddd",function(t,e){return e.weekdaysRegex(t)});wt(["dd","ddd","dddd"],function(t,e,s,r){var i=s._locale.weekdaysParse(t,r,s._strict);i!=null?e.d=i:b(s).invalidWeekday=t});wt(["d","e","E"],function(t,e,s,r){e[r]=S(t)});function Oo(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function To(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Is(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Po="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),si="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Do="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Eo=vt,Mo=vt,Ro=vt;function xo(t,e){var s=Q(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Is(s,this._week.dow):t?s[t.day()]:s}function Ao(t){return t===!0?Is(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Co(t){return t===!0?Is(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function jo(t,e,s){var r,i,n,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)n=ne([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(n,"").toLocaleLowerCase();return s?e==="dddd"?(i=j.call(this._weekdaysParse,a),i!==-1?i:null):e==="ddd"?(i=j.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=j.call(this._minWeekdaysParse,a),i!==-1?i:null):e==="dddd"?(i=j.call(this._weekdaysParse,a),i!==-1||(i=j.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=j.call(this._minWeekdaysParse,a),i!==-1?i:null)):e==="ddd"?(i=j.call(this._shortWeekdaysParse,a),i!==-1||(i=j.call(this._weekdaysParse,a),i!==-1)?i:(i=j.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=j.call(this._minWeekdaysParse,a),i!==-1||(i=j.call(this._weekdaysParse,a),i!==-1)?i:(i=j.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function Io(t,e,s){var r,i,n;if(this._weekdaysParseExact)return jo.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=ne([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(n.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function $o(t){if(!this.isValid())return t!=null?this:NaN;var e=dt(this,"Day");return t!=null?(t=Oo(t,this.localeData()),this.add(t-e,"d")):e}function Lo(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Yo(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=To(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Uo(t){return this._weekdaysParseExact?(P(this,"_weekdaysRegex")||$s.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(P(this,"_weekdaysRegex")||(this._weekdaysRegex=Eo),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function No(t){return this._weekdaysParseExact?(P(this,"_weekdaysRegex")||$s.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(P(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Mo),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Fo(t){return this._weekdaysParseExact?(P(this,"_weekdaysRegex")||$s.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(P(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ro),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $s(){function t(c,d){return d.length-c.length}var e=[],s=[],r=[],i=[],n,a,o,l,u;for(n=0;n<7;n++)a=ne([2e3,1]).day(n),o=de(this.weekdaysMin(a,"")),l=de(this.weekdaysShort(a,"")),u=de(this.weekdays(a,"")),e.push(o),s.push(l),r.push(u),i.push(o),i.push(l),i.push(u);e.sort(t),s.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Ls(){return this.hours()%12||12}function Wo(){return this.hours()||24}p("H",["HH",2],0,"hour");p("h",["hh",2],0,Ls);p("k",["kk",2],0,Wo);p("hmm",0,0,function(){return""+Ls.apply(this)+ie(this.minutes(),2)});p("hmmss",0,0,function(){return""+Ls.apply(this)+ie(this.minutes(),2)+ie(this.seconds(),2)});p("Hmm",0,0,function(){return""+this.hours()+ie(this.minutes(),2)});p("Hmmss",0,0,function(){return""+this.hours()+ie(this.minutes(),2)+ie(this.seconds(),2)});function ri(t,e){p(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ri("a",!0);ri("A",!1);function ii(t,e){return e._meridiemParse}g("a",ii);g("A",ii);g("H",A,Cs);g("h",A,et);g("k",A,et);g("HH",A,V);g("hh",A,V);g("kk",A,V);g("hmm",Gr);g("hmmss",qr);g("Hmm",Gr);g("Hmmss",qr);M(["H","HH"],I);M(["k","kk"],function(t,e,s){var r=S(t);e[I]=r===24?0:r});M(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});M(["h","hh"],function(t,e,s){e[I]=S(t),b(s).bigHour=!0});M("hmm",function(t,e,s){var r=t.length-2;e[I]=S(t.substr(0,r)),e[Z]=S(t.substr(r)),b(s).bigHour=!0});M("hmmss",function(t,e,s){var r=t.length-4,i=t.length-2;e[I]=S(t.substr(0,r)),e[Z]=S(t.substr(r,2)),e[he]=S(t.substr(i)),b(s).bigHour=!0});M("Hmm",function(t,e,s){var r=t.length-2;e[I]=S(t.substr(0,r)),e[Z]=S(t.substr(r))});M("Hmmss",function(t,e,s){var r=t.length-4,i=t.length-2;e[I]=S(t.substr(0,r)),e[Z]=S(t.substr(r,2)),e[he]=S(t.substr(i))});function Ho(t){return(t+"").toLowerCase().charAt(0)==="p"}var Bo=/[ap]\.?m?\.?/i,Vo=tt("Hours",!0);function Go(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var ni={calendar:Ca,longDateFormat:La,invalidDate:Ua,ordinal:Fa,dayOfMonthOrdinalParse:Wa,relativeTime:Ba,months:ao,monthsShort:Kr,week:vo,weekdays:Po,weekdaysMin:Do,weekdaysShort:si,meridiemParse:Bo},C={},it={},mt;function qo(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function pr(t){return t&&t.toLowerCase().replace("_","-")}function zo(t){for(var e=0,s,r,i,n;e<t.length;){for(n=pr(t[e]).split("-"),s=n.length,r=pr(t[e+1]),r=r?r.split("-"):null;s>0;){if(i=Vt(n.slice(0,s).join("-")),i)return i;if(r&&r.length>=s&&qo(n,r)>=s-1)break;s--}e++}return mt}function Jo(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Vt(t){var e=null,s;if(C[t]===void 0&&typeof module!="undefined"&&module&&module.exports&&Jo(t))try{e=mt._abbr,s=require,s("./locale/"+t),Se(e)}catch(r){C[t]=null}return C[t]}function Se(t,e){var s;return t&&(H(e)?s=me(t):s=Ys(t,e),s?mt=s:typeof console!="undefined"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),mt._abbr}function Ys(t,e){if(e!==null){var s,r=ni;if(e.abbr=t,C[t]!=null)Wr("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=C[t]._config;else if(e.parentLocale!=null)if(C[e.parentLocale]!=null)r=C[e.parentLocale]._config;else if(s=Vt(e.parentLocale),s!=null)r=s._config;else return it[e.parentLocale]||(it[e.parentLocale]=[]),it[e.parentLocale].push({name:t,config:e}),null;return C[t]=new Es(_s(r,e)),it[t]&&it[t].forEach(function(i){Ys(i.name,i.config)}),Se(t),C[t]}else return delete C[t],null}function Ko(t,e){if(e!=null){var s,r,i=ni;C[t]!=null&&C[t].parentLocale!=null?C[t].set(_s(C[t]._config,e)):(r=Vt(t),r!=null&&(i=r._config),e=_s(i,e),r==null&&(e.abbr=t),s=new Es(e),s.parentLocale=C[t],C[t]=s),Se(t)}else C[t]!=null&&(C[t].parentLocale!=null?(C[t]=C[t].parentLocale,t===Se()&&Se(t)):C[t]!=null&&delete C[t]);return C[t]}function me(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return mt;if(!Q(t)){if(e=Vt(t),e)return e;t=[t]}return zo(t)}function Zo(){return ms(C)}function Us(t){var e,s=t._a;return s&&b(t).overflow===-2&&(e=s[ce]<0||s[ce]>11?ce:s[re]<1||s[re]>js(s[F],s[ce])?re:s[I]<0||s[I]>24||s[I]===24&&(s[Z]!==0||s[he]!==0||s[Ee]!==0)?I:s[Z]<0||s[Z]>59?Z:s[he]<0||s[he]>59?he:s[Ee]<0||s[Ee]>999?Ee:-1,b(t)._overflowDayOfYear&&(e<F||e>re)&&(e=re),b(t)._overflowWeeks&&e===-1&&(e=eo),b(t)._overflowWeekday&&e===-1&&(e=to),b(t).overflow=e),t}var Qo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,el=/Z|[+-]\d\d(?::?\d\d)?/,Dt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ss=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],tl=/^\/?Date\((-?\d+)/i,sl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,rl={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ai(t){var e,s,r=t._i,i=Qo.exec(r)||Xo.exec(r),n,a,o,l,u=Dt.length,c=ss.length;if(i){for(b(t).iso=!0,e=0,s=u;e<s;e++)if(Dt[e][1].exec(i[1])){a=Dt[e][0],n=Dt[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(i[3]){for(e=0,s=c;e<s;e++)if(ss[e][1].exec(i[3])){o=(i[2]||" ")+ss[e][0];break}if(o==null){t._isValid=!1;return}}if(!n&&o!=null){t._isValid=!1;return}if(i[4])if(el.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=a+(o||"")+(l||""),Fs(t)}else t._isValid=!1}function il(t,e,s,r,i,n){var a=[nl(t),Kr.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(i,10)];return n&&a.push(parseInt(n,10)),a}function nl(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function al(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ol(t,e,s){if(t){var r=si.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return b(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function ll(t,e,s){if(t)return rl[t];if(e)return 0;var r=parseInt(s,10),i=r%100,n=(r-i)/100;return n*60+i}function oi(t){var e=sl.exec(al(t._i)),s;if(e){if(s=il(e[4],e[3],e[2],e[5],e[6],e[7]),!ol(e[1],s,t))return;t._a=s,t._tzm=ll(e[8],e[9],e[10]),t._d=ft.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),b(t).rfc2822=!0}else t._isValid=!1}function ul(t){var e=tl.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(ai(t),t._isValid===!1)delete t._isValid;else return;if(oi(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:m.createFromInputFallback(t)}m.createFromInputFallback=q("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Be(t,e,s){return t!=null?t:e!=null?e:s}function cl(t){var e=new Date(m.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ns(t){var e,s,r=[],i,n,a;if(!t._d){for(i=cl(t),t._w&&t._a[re]==null&&t._a[ce]==null&&hl(t),t._dayOfYear!=null&&(a=Be(t._a[F],i[F]),(t._dayOfYear>ct(a)||t._dayOfYear===0)&&(b(t)._overflowDayOfYear=!0),s=ft(a,0,t._dayOfYear),t._a[ce]=s.getUTCMonth(),t._a[re]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[I]===24&&t._a[Z]===0&&t._a[he]===0&&t._a[Ee]===0&&(t._nextDay=!0,t._a[I]=0),t._d=(t._useUTC?ft:go).apply(null,r),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[I]=24),t._w&&typeof t._w.d!="undefined"&&t._w.d!==n&&(b(t).weekdayMismatch=!0)}}function hl(t){var e,s,r,i,n,a,o,l,u;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(n=1,a=4,s=Be(e.GG,t._a[F],_t(x(),1,4).year),r=Be(e.W,1),i=Be(e.E,1),(i<1||i>7)&&(l=!0)):(n=t._locale._week.dow,a=t._locale._week.doy,u=_t(x(),n,a),s=Be(e.gg,t._a[F],u.year),r=Be(e.w,u.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+n,(e.e<0||e.e>6)&&(l=!0)):i=n),r<1||r>fe(s,n,a)?b(t)._overflowWeeks=!0:l!=null?b(t)._overflowWeekday=!0:(o=ti(s,r,i,n,a),t._a[F]=o.year,t._dayOfYear=o.dayOfYear)}m.ISO_8601=function(){};m.RFC_2822=function(){};function Fs(t){if(t._f===m.ISO_8601){ai(t);return}if(t._f===m.RFC_2822){oi(t);return}t._a=[],b(t).empty=!0;var e=""+t._i,s,r,i,n,a,o=e.length,l=0,u,c;for(i=Hr(t._f,t._locale).match(Ms)||[],c=i.length,s=0;s<c;s++)n=i[s],r=(e.match(Za(n,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&b(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),l+=r.length),qe[n]?(r?b(t).empty=!1:b(t).unusedTokens.push(n),Xa(n,r,t)):t._strict&&!r&&b(t).unusedTokens.push(n);b(t).charsLeftOver=o-l,e.length>0&&b(t).unusedInput.push(e),t._a[I]<=12&&b(t).bigHour===!0&&t._a[I]>0&&(b(t).bigHour=void 0),b(t).parsedDateParts=t._a.slice(0),b(t).meridiem=t._meridiem,t._a[I]=dl(t._locale,t._a[I],t._meridiem),u=b(t).era,u!==null&&(t._a[F]=t._locale.erasConvertYear(u,t._a[F])),Ns(t),Us(t)}function dl(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function fl(t){var e,s,r,i,n,a,o=!1,l=t._f.length;if(l===0){b(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)n=0,a=!1,e=Ds({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],Fs(e),Ps(e)&&(a=!0),n+=b(e).charsLeftOver,n+=b(e).unusedTokens.length*10,b(e).score=n,o?n<r&&(r=n,s=e):(r==null||n<r||a)&&(r=n,s=e,a&&(o=!0));be(t,s||e)}function _l(t){if(!t._d){var e=Rs(t._i),s=e.day===void 0?e.date:e.day;t._a=Nr([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),Ns(t)}}function ml(t){var e=new pt(Us(li(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function li(t){var e=t._i,s=t._f;return t._locale=t._locale||me(t._l),e===null||s===void 0&&e===""?Yt({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),X(e)?new pt(Us(e)):(gt(e)?t._d=e:Q(s)?fl(t):s?Fs(t):yl(t),Ps(t)||(t._d=null),t))}function yl(t){var e=t._i;H(e)?t._d=new Date(m.now()):gt(e)?t._d=new Date(e.valueOf()):typeof e=="string"?ul(t):Q(e)?(t._a=Nr(e.slice(0),function(s){return parseInt(s,10)}),Ns(t)):Me(e)?_l(t):_e(e)?t._d=new Date(e):m.createFromInputFallback(t)}function ui(t,e,s,r,i){var n={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Me(t)&&Ts(t)||Q(t)&&t.length===0)&&(t=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=i,n._l=s,n._i=t,n._f=e,n._strict=r,ml(n)}function x(t,e,s,r){return ui(t,e,s,r,!1)}var gl=q("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=x.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Yt()}),pl=q("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=x.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Yt()});function ci(t,e){var s,r;if(e.length===1&&Q(e[0])&&(e=e[0]),!e.length)return x();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function vl(){var t=[].slice.call(arguments,0);return ci("isBefore",t)}function wl(){var t=[].slice.call(arguments,0);return ci("isAfter",t)}var bl=function(){return Date.now?Date.now():+new Date},nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kl(t){var e,s=!1,r,i=nt.length;for(e in t)if(P(t,e)&&!(j.call(nt,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[nt[r]]){if(s)return!1;parseFloat(t[nt[r]])!==S(t[nt[r]])&&(s=!0)}return!0}function Sl(){return this._isValid}function Ol(){return ee(NaN)}function Gt(t){var e=Rs(t),s=e.year||0,r=e.quarter||0,i=e.month||0,n=e.week||e.isoWeek||0,a=e.day||0,o=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=kl(e),this._milliseconds=+c+u*1e3+l*6e4+o*1e3*60*60,this._days=+a+n*7,this._months=+i+r*3+s*12,this._data={},this._locale=me(),this._bubble()}function Mt(t){return t instanceof Gt}function gs(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Tl(t,e,s){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),n=0,a;for(a=0;a<r;a++)S(t[a])!==S(e[a])&&n++;return n+i}function hi(t,e){p(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+ie(~~(s/60),2)+e+ie(~~s%60,2)})}hi("Z",":");hi("ZZ","");g("Z",Ht);g("ZZ",Ht);M(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Ws(Ht,t)});var Pl=/([\+\-]|\d\d)/gi;function Ws(t,e){var s=(e||"").match(t),r,i,n;return s===null?null:(r=s[s.length-1]||[],i=(r+"").match(Pl)||["-",0,0],n=+(i[1]*60)+S(i[2]),n===0?0:i[0]==="+"?n:-n)}function Hs(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(X(t)||gt(t)?t.valueOf():x(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),m.updateOffset(s,!1),s):x(t).local()}function ps(t){return-Math.round(t._d.getTimezoneOffset())}m.updateOffset=function(){};function Dl(t,e,s){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Ws(Ht,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(i=ps(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?_i(this,ee(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,m.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:ps(this)}function El(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ml(t){return this.utcOffset(0,t)}function Rl(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ps(this),"m")),this}function xl(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Ws(Ja,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Al(t){return this.isValid()?(t=t?x(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Cl(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jl(){if(!H(this._isDSTShifted))return this._isDSTShifted;var t={},e;return Ds(t,this),t=li(t),t._a?(e=t._isUTC?ne(t._a):x(t._a),this._isDSTShifted=this.isValid()&&Tl(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Il(){return this.isValid()?!this._isUTC:!1}function $l(){return this.isValid()?this._isUTC:!1}function di(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ll=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Yl=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ee(t,e){var s=t,r=null,i,n,a;return Mt(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:_e(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=Ll.exec(t))?(i=r[1]==="-"?-1:1,s={y:0,d:S(r[re])*i,h:S(r[I])*i,m:S(r[Z])*i,s:S(r[he])*i,ms:S(gs(r[Ee]*1e3))*i}):(r=Yl.exec(t))?(i=r[1]==="-"?-1:1,s={y:Te(r[2],i),M:Te(r[3],i),w:Te(r[4],i),d:Te(r[5],i),h:Te(r[6],i),m:Te(r[7],i),s:Te(r[8],i)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=Ul(x(s.from),x(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),n=new Gt(s),Mt(t)&&P(t,"_locale")&&(n._locale=t._locale),Mt(t)&&P(t,"_isValid")&&(n._isValid=t._isValid),n}ee.fn=Gt.prototype;ee.invalid=Ol;function Te(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function vr(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function Ul(t,e){var s;return t.isValid()&&e.isValid()?(e=Hs(e,t),t.isBefore(e)?s=vr(t,e):(s=vr(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function fi(t,e){return function(s,r){var i,n;return r!==null&&!isNaN(+r)&&(Wr(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=s,s=r,r=n),i=ee(s,r),_i(this,i,t),this}}function _i(t,e,s,r){var i=e._milliseconds,n=gs(e._days),a=gs(e._months);t.isValid()&&(r=r==null?!0:r,a&&Qr(t,dt(t,"Month")+a*s),n&&Jr(t,"Date",dt(t,"Date")+n*s),i&&t._d.setTime(t._d.valueOf()+i*s),r&&m.updateOffset(t,n||a))}var Nl=fi(1,"add"),Fl=fi(-1,"subtract");function mi(t){return typeof t=="string"||t instanceof String}function Wl(t){return X(t)||gt(t)||mi(t)||_e(t)||Bl(t)||Hl(t)||t===null||t===void 0}function Hl(t){var e=Me(t)&&!Ts(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,n,a=r.length;for(i=0;i<a;i+=1)n=r[i],s=s||P(t,n);return e&&s}function Bl(t){var e=Q(t),s=!1;return e&&(s=t.filter(function(r){return!_e(r)&&mi(t)}).length===0),e&&s}function Vl(t){var e=Me(t)&&!Ts(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,n;for(i=0;i<r.length;i+=1)n=r[i],s=s||P(t,n);return e&&s}function Gl(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function ql(t,e){arguments.length===1&&(arguments[0]?Wl(arguments[0])?(t=arguments[0],e=void 0):Vl(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||x(),r=Hs(s,this).startOf("day"),i=m.calendarFormat(this,r)||"sameElse",n=e&&(ae(e[i])?e[i].call(this,s):e[i]);return this.format(n||this.localeData().calendar(i,this,x(s)))}function zl(){return new pt(this)}function Jl(t,e){var s=X(t)?t:x(t);return this.isValid()&&s.isValid()?(e=z(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function Kl(t,e){var s=X(t)?t:x(t);return this.isValid()&&s.isValid()?(e=z(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function Zl(t,e,s,r){var i=X(t)?t:x(t),n=X(e)?e:x(e);return this.isValid()&&i.isValid()&&n.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,s):!this.isBefore(i,s))&&(r[1]===")"?this.isBefore(n,s):!this.isAfter(n,s))):!1}function Ql(t,e){var s=X(t)?t:x(t),r;return this.isValid()&&s.isValid()?(e=z(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function Xl(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function eu(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function tu(t,e,s){var r,i,n;if(!this.isValid())return NaN;if(r=Hs(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=z(e),e){case"year":n=Rt(this,r)/12;break;case"month":n=Rt(this,r);break;case"quarter":n=Rt(this,r)/3;break;case"second":n=(this-r)/1e3;break;case"minute":n=(this-r)/6e4;break;case"hour":n=(this-r)/36e5;break;case"day":n=(this-r-i)/864e5;break;case"week":n=(this-r-i)/6048e5;break;default:n=this-r}return s?n:G(n)}function Rt(t,e){if(t.date()<e.date())return-Rt(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),i,n;return e-r<0?(i=t.clone().add(s-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(s+1,"months"),n=(e-r)/(i-r)),-(s+n)||0}m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";m.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function su(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ru(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Et(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ae(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Et(s,"Z")):Et(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function iu(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,i,n;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=e+'[")]',this.format(s+r+i+n)}function nu(t){t||(t=this.isUtc()?m.defaultFormatUtc:m.defaultFormat);var e=Et(this,t);return this.localeData().postformat(e)}function au(t,e){return this.isValid()&&(X(t)&&t.isValid()||x(t).isValid())?ee({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ou(t){return this.from(x(),t)}function lu(t,e){return this.isValid()&&(X(t)&&t.isValid()||x(t).isValid())?ee({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function uu(t){return this.to(x(),t)}function yi(t){var e;return t===void 0?this._locale._abbr:(e=me(t),e!=null&&(this._locale=e),this)}var gi=q("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function pi(){return this._locale}var jt=1e3,ze=60*jt,It=60*ze,vi=(365*400+97)*24*It;function Je(t,e){return(t%e+e)%e}function wi(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-vi:new Date(t,e,s).valueOf()}function bi(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-vi:Date.UTC(t,e,s)}function cu(t){var e,s;if(t=z(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?bi:wi,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Je(e+(this._isUTC?0:this.utcOffset()*ze),It);break;case"minute":e=this._d.valueOf(),e-=Je(e,ze);break;case"second":e=this._d.valueOf(),e-=Je(e,jt);break}return this._d.setTime(e),m.updateOffset(this,!0),this}function hu(t){var e,s;if(t=z(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?bi:wi,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=It-Je(e+(this._isUTC?0:this.utcOffset()*ze),It)-1;break;case"minute":e=this._d.valueOf(),e+=ze-Je(e,ze)-1;break;case"second":e=this._d.valueOf(),e+=jt-Je(e,jt)-1;break}return this._d.setTime(e),m.updateOffset(this,!0),this}function du(){return this._d.valueOf()-(this._offset||0)*6e4}function fu(){return Math.floor(this.valueOf()/1e3)}function _u(){return new Date(this.valueOf())}function mu(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function yu(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function gu(){return this.isValid()?this.toISOString():null}function pu(){return Ps(this)}function vu(){return be({},b(this))}function wu(){return b(this).overflow}function bu(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}p("N",0,0,"eraAbbr");p("NN",0,0,"eraAbbr");p("NNN",0,0,"eraAbbr");p("NNNN",0,0,"eraName");p("NNNNN",0,0,"eraNarrow");p("y",["y",1],"yo","eraYear");p("y",["yy",2],0,"eraYear");p("y",["yyy",3],0,"eraYear");p("y",["yyyy",4],0,"eraYear");g("N",Bs);g("NN",Bs);g("NNN",Bs);g("NNNN",Au);g("NNNNN",Cu);M(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var i=s._locale.erasParse(t,r,s._strict);i?b(s).era=i:b(s).invalidEra=t});g("y",Xe);g("yy",Xe);g("yyy",Xe);g("yyyy",Xe);g("yo",ju);M(["y","yy","yyy","yyyy"],F);M(["yo"],function(t,e,s,r){var i;s._locale._eraYearOrdinalRegex&&(i=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[F]=s._locale.eraYearOrdinalParse(t,i):e[F]=parseInt(t,10)});function ku(t,e){var s,r,i,n=this._eras||me("en")._eras;for(s=0,r=n.length;s<r;++s){switch(typeof n[s].since){case"string":i=m(n[s].since).startOf("day"),n[s].since=i.valueOf();break}switch(typeof n[s].until){case"undefined":n[s].until=1/0;break;case"string":i=m(n[s].until).startOf("day").valueOf(),n[s].until=i.valueOf();break}}return n}function Su(t,e,s){var r,i,n=this.eras(),a,o,l;for(t=t.toUpperCase(),r=0,i=n.length;r<i;++r)if(a=n[r].name.toUpperCase(),o=n[r].abbr.toUpperCase(),l=n[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(o===t)return n[r];break;case"NNNN":if(a===t)return n[r];break;case"NNNNN":if(l===t)return n[r];break}else if([a,o,l].indexOf(t)>=0)return n[r]}function Ou(t,e){var s=t.since<=t.until?1:-1;return e===void 0?m(t.since).year():m(t.since).year()+(e-t.offset)*s}function Tu(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function Pu(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function Du(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function Eu(){var t,e,s,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(s=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-m(i[t].since).year())*s+i[t].offset;return this.year()}function Mu(t){return P(this,"_erasNameRegex")||Vs.call(this),t?this._erasNameRegex:this._erasRegex}function Ru(t){return P(this,"_erasAbbrRegex")||Vs.call(this),t?this._erasAbbrRegex:this._erasRegex}function xu(t){return P(this,"_erasNarrowRegex")||Vs.call(this),t?this._erasNarrowRegex:this._erasRegex}function Bs(t,e){return e.erasAbbrRegex(t)}function Au(t,e){return e.erasNameRegex(t)}function Cu(t,e){return e.erasNarrowRegex(t)}function ju(t,e){return e._eraYearOrdinalRegex||Xe}function Vs(){var t=[],e=[],s=[],r=[],i,n,a,o,l,u=this.eras();for(i=0,n=u.length;i<n;++i)a=de(u[i].name),o=de(u[i].abbr),l=de(u[i].narrow),e.push(a),t.push(o),s.push(l),r.push(a),r.push(o),r.push(l);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}p(0,["gg",2],0,function(){return this.weekYear()%100});p(0,["GG",2],0,function(){return this.isoWeekYear()%100});function qt(t,e){p(0,[t,t.length],0,e)}qt("gggg","weekYear");qt("ggggg","weekYear");qt("GGGG","isoWeekYear");qt("GGGGG","isoWeekYear");g("G",Wt);g("g",Wt);g("GG",A,V);g("gg",A,V);g("GGGG",As,xs);g("gggg",As,xs);g("GGGGG",Ft,Ut);g("ggggg",Ft,Ut);wt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=S(t)});wt(["gg","GG"],function(t,e,s,r){e[r]=m.parseTwoDigitYear(t)});function Iu(t){return ki.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function $u(t){return ki.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Lu(){return fe(this.year(),1,4)}function Yu(){return fe(this.isoWeekYear(),1,4)}function Uu(){var t=this.localeData()._week;return fe(this.year(),t.dow,t.doy)}function Nu(){var t=this.localeData()._week;return fe(this.weekYear(),t.dow,t.doy)}function ki(t,e,s,r,i){var n;return t==null?_t(this,r,i).year:(n=fe(t,r,i),e>n&&(e=n),Fu.call(this,t,e,s,r,i))}function Fu(t,e,s,r,i){var n=ti(t,e,s,r,i),a=ft(n.year,0,n.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}p("Q",0,"Qo","quarter");g("Q",Br);M("Q",function(t,e){e[ce]=(S(t)-1)*3});function Wu(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}p("D",["DD",2],"Do","date");g("D",A,et);g("DD",A,V);g("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});M(["D","DD"],re);M("Do",function(t,e){e[re]=S(t.match(A)[0])});var Si=tt("Date",!0);p("DDD",["DDDD",3],"DDDo","dayOfYear");g("DDD",Nt);g("DDDD",Vr);M(["DDD","DDDD"],function(t,e,s){s._dayOfYear=S(t)});function Hu(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}p("m",["mm",2],0,"minute");g("m",A,Cs);g("mm",A,V);M(["m","mm"],Z);var Bu=tt("Minutes",!1);p("s",["ss",2],0,"second");g("s",A,Cs);g("ss",A,V);M(["s","ss"],he);var Vu=tt("Seconds",!1);p("S",0,0,function(){return~~(this.millisecond()/100)});p(0,["SS",2],0,function(){return~~(this.millisecond()/10)});p(0,["SSS",3],0,"millisecond");p(0,["SSSS",4],0,function(){return this.millisecond()*10});p(0,["SSSSS",5],0,function(){return this.millisecond()*100});p(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});p(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});p(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});p(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});g("S",Nt,Br);g("SS",Nt,V);g("SSS",Nt,Vr);var ke,Oi;for(ke="SSSS";ke.length<=9;ke+="S")g(ke,Xe);function Gu(t,e){e[Ee]=S(("0."+t)*1e3)}for(ke="S";ke.length<=9;ke+="S")M(ke,Gu);Oi=tt("Milliseconds",!1);p("z",0,0,"zoneAbbr");p("zz",0,0,"zoneName");function qu(){return this._isUTC?"UTC":""}function zu(){return this._isUTC?"Coordinated Universal Time":""}var f=pt.prototype;f.add=Nl;f.calendar=ql;f.clone=zl;f.diff=tu;f.endOf=hu;f.format=nu;f.from=au;f.fromNow=ou;f.to=lu;f.toNow=uu;f.get=ro;f.invalidAt=wu;f.isAfter=Jl;f.isBefore=Kl;f.isBetween=Zl;f.isSame=Ql;f.isSameOrAfter=Xl;f.isSameOrBefore=eu;f.isValid=pu;f.lang=gi;f.locale=yi;f.localeData=pi;f.max=pl;f.min=gl;f.parsingFlags=vu;f.set=io;f.startOf=cu;f.subtract=Fl;f.toArray=mu;f.toObject=yu;f.toDate=_u;f.toISOString=ru;f.inspect=iu;typeof Symbol!="undefined"&&Symbol.for!=null&&(f[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});f.toJSON=gu;f.toString=su;f.unix=fu;f.valueOf=du;f.creationData=bu;f.eraName=Tu;f.eraNarrow=Pu;f.eraAbbr=Du;f.eraYear=Eu;f.year=zr;f.isLeapYear=so;f.weekYear=Iu;f.isoWeekYear=$u;f.quarter=f.quarters=Wu;f.month=Xr;f.daysInMonth=_o;f.week=f.weeks=ko;f.isoWeek=f.isoWeeks=So;f.weeksInYear=Uu;f.weeksInWeekYear=Nu;f.isoWeeksInYear=Lu;f.isoWeeksInISOWeekYear=Yu;f.date=Si;f.day=f.days=$o;f.weekday=Lo;f.isoWeekday=Yo;f.dayOfYear=Hu;f.hour=f.hours=Vo;f.minute=f.minutes=Bu;f.second=f.seconds=Vu;f.millisecond=f.milliseconds=Oi;f.utcOffset=Dl;f.utc=Ml;f.local=Rl;f.parseZone=xl;f.hasAlignedHourOffset=Al;f.isDST=Cl;f.isLocal=Il;f.isUtcOffset=$l;f.isUtc=di;f.isUTC=di;f.zoneAbbr=qu;f.zoneName=zu;f.dates=q("dates accessor is deprecated. Use date instead.",Si);f.months=q("months accessor is deprecated. Use month instead",Xr);f.years=q("years accessor is deprecated. Use year instead",zr);f.zone=q("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",El);f.isDSTShifted=q("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",jl);function Ju(t){return x(t*1e3)}function Ku(){return x.apply(null,arguments).parseZone()}function Ti(t){return t}var D=Es.prototype;D.calendar=ja;D.longDateFormat=Ya;D.invalidDate=Na;D.ordinal=Ha;D.preparse=Ti;D.postformat=Ti;D.relativeTime=Va;D.pastFuture=Ga;D.set=Aa;D.eras=ku;D.erasParse=Su;D.erasConvertYear=Ou;D.erasAbbrRegex=Ru;D.erasNameRegex=Mu;D.erasNarrowRegex=xu;D.months=uo;D.monthsShort=co;D.monthsParse=fo;D.monthsRegex=yo;D.monthsShortRegex=mo;D.week=po;D.firstDayOfYear=bo;D.firstDayOfWeek=wo;D.weekdays=xo;D.weekdaysMin=Co;D.weekdaysShort=Ao;D.weekdaysParse=Io;D.weekdaysRegex=Uo;D.weekdaysShortRegex=No;D.weekdaysMinRegex=Fo;D.isPM=Ho;D.meridiem=Go;function $t(t,e,s,r){var i=me(),n=ne().set(r,e);return i[s](n,t)}function Pi(t,e,s){if(_e(t)&&(e=t,t=void 0),t=t||"",e!=null)return $t(t,e,s,"month");var r,i=[];for(r=0;r<12;r++)i[r]=$t(t,r,s,"month");return i}function Gs(t,e,s,r){typeof t=="boolean"?(_e(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,_e(e)&&(s=e,e=void 0),e=e||"");var i=me(),n=t?i._week.dow:0,a,o=[];if(s!=null)return $t(e,(s+n)%7,r,"day");for(a=0;a<7;a++)o[a]=$t(e,(a+n)%7,r,"day");return o}function Zu(t,e){return Pi(t,e,"months")}function Qu(t,e){return Pi(t,e,"monthsShort")}function Xu(t,e,s){return Gs(t,e,s,"weekdays")}function ec(t,e,s){return Gs(t,e,s,"weekdaysShort")}function tc(t,e,s){return Gs(t,e,s,"weekdaysMin")}Se("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=S(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});m.lang=q("moment.lang is deprecated. Use moment.locale instead.",Se);m.langData=q("moment.langData is deprecated. Use moment.localeData instead.",me);var oe=Math.abs;function sc(){var t=this._data;return this._milliseconds=oe(this._milliseconds),this._days=oe(this._days),this._months=oe(this._months),t.milliseconds=oe(t.milliseconds),t.seconds=oe(t.seconds),t.minutes=oe(t.minutes),t.hours=oe(t.hours),t.months=oe(t.months),t.years=oe(t.years),this}function Di(t,e,s,r){var i=ee(e,s);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function rc(t,e){return Di(this,t,e,1)}function ic(t,e){return Di(this,t,e,-1)}function wr(t){return t<0?Math.floor(t):Math.ceil(t)}function nc(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,i,n,a,o,l;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=wr(vs(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,i=G(t/1e3),r.seconds=i%60,n=G(i/60),r.minutes=n%60,a=G(n/60),r.hours=a%24,e+=G(a/24),l=G(Ei(e)),s+=l,e-=wr(vs(l)),o=G(s/12),s%=12,r.days=e,r.months=s,r.years=o,this}function Ei(t){return t*4800/146097}function vs(t){return t*146097/4800}function ac(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=z(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+Ei(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(vs(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function ye(t){return function(){return this.as(t)}}var Mi=ye("ms"),oc=ye("s"),lc=ye("m"),uc=ye("h"),cc=ye("d"),hc=ye("w"),dc=ye("M"),fc=ye("Q"),_c=ye("y"),mc=Mi;function yc(){return ee(this)}function gc(t){return t=z(t),this.isValid()?this[t+"s"]():NaN}function Ae(t){return function(){return this.isValid()?this._data[t]:NaN}}var pc=Ae("milliseconds"),vc=Ae("seconds"),wc=Ae("minutes"),bc=Ae("hours"),kc=Ae("days"),Sc=Ae("months"),Oc=Ae("years");function Tc(){return G(this.days()/7)}var ue=Math.round,Ve={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Pc(t,e,s,r,i){return i.relativeTime(e||1,!!s,t,r)}function Dc(t,e,s,r){var i=ee(t).abs(),n=ue(i.as("s")),a=ue(i.as("m")),o=ue(i.as("h")),l=ue(i.as("d")),u=ue(i.as("M")),c=ue(i.as("w")),d=ue(i.as("y")),_=n<=s.ss&&["s",n]||n<s.s&&["ss",n]||a<=1&&["m"]||a<s.m&&["mm",a]||o<=1&&["h"]||o<s.h&&["hh",o]||l<=1&&["d"]||l<s.d&&["dd",l];return s.w!=null&&(_=_||c<=1&&["w"]||c<s.w&&["ww",c]),_=_||u<=1&&["M"]||u<s.M&&["MM",u]||d<=1&&["y"]||["yy",d],_[2]=e,_[3]=+t>0,_[4]=r,Pc.apply(null,_)}function Ec(t){return t===void 0?ue:typeof t=="function"?(ue=t,!0):!1}function Mc(t,e){return Ve[t]===void 0?!1:e===void 0?Ve[t]:(Ve[t]=e,t==="s"&&(Ve.ss=e-1),!0)}function Rc(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=Ve,i,n;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},Ve,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),n=Dc(this,!s,r,i),s&&(n=i.pastFuture(+this,n)),i.postformat(n)}var rs=Math.abs;function We(t){return(t>0)-(t<0)||+t}function zt(){if(!this.isValid())return this.localeData().invalidDate();var t=rs(this._milliseconds)/1e3,e=rs(this._days),s=rs(this._months),r,i,n,a,o=this.asSeconds(),l,u,c,d;return o?(r=G(t/60),i=G(r/60),t%=60,r%=60,n=G(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",u=We(this._months)!==We(o)?"-":"",c=We(this._days)!==We(o)?"-":"",d=We(this._milliseconds)!==We(o)?"-":"",l+"P"+(n?u+n+"Y":"")+(s?u+s+"M":"")+(e?c+e+"D":"")+(i||r||t?"T":"")+(i?d+i+"H":"")+(r?d+r+"M":"")+(t?d+a+"S":"")):"P0D"}var T=Gt.prototype;T.isValid=Sl;T.abs=sc;T.add=rc;T.subtract=ic;T.as=ac;T.asMilliseconds=Mi;T.asSeconds=oc;T.asMinutes=lc;T.asHours=uc;T.asDays=cc;T.asWeeks=hc;T.asMonths=dc;T.asQuarters=fc;T.asYears=_c;T.valueOf=mc;T._bubble=nc;T.clone=yc;T.get=gc;T.milliseconds=pc;T.seconds=vc;T.minutes=wc;T.hours=bc;T.days=kc;T.weeks=Tc;T.months=Sc;T.years=Oc;T.humanize=Rc;T.toISOString=zt;T.toString=zt;T.toJSON=zt;T.locale=yi;T.localeData=pi;T.toIsoString=q("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zt);T.lang=gi;p("X",0,0,"unix");p("x",0,0,"valueOf");g("x",Wt);g("X",Ka);M("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});M("x",function(t,e,s){s._d=new Date(S(t))});//! moment.js
m.version="2.30.1";Ra(x);m.fn=f;m.min=vl;m.max=wl;m.now=bl;m.utc=ne;m.unix=Ju;m.months=Zu;m.isDate=gt;m.locale=Se;m.invalid=Yt;m.duration=ee;m.isMoment=X;m.weekdays=Xu;m.parseZone=Ku;m.localeData=me;m.isDuration=Mt;m.monthsShort=Qu;m.weekdaysMin=tc;m.defineLocale=Ys;m.updateLocale=Ko;m.locales=Zo;m.weekdaysShort=ec;m.normalizeUnits=z;m.relativeTimeRounding=Ec;m.relativeTimeThreshold=Mc;m.calendarFormat=Gl;m.prototype=f;m.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const xc="https://qlkogybsvapxmztzzpkj.supabase.co",Ac="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa29neWJzdmFweG16dHp6cGtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxMzkwNzAsImV4cCI6MjA1NzcxNTA3MH0.KAgmCEPVA4fI2aBpH9KKqh8yAILECI8A9pdiBDe8Brc",Ri=Ma(xc,Ac),xi=()=>{const t=localStorage.getItem("_ms-mem");return t?JSON.parse(t):null},Cc=()=>h(void 0,null,function*(){sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",jc(32));const t=sessionStorage.getItem("sessionId"),{id:e}=xi(),{error:s}=yield Ri.rpc("get_or_create_session",{session_id:t,input_member_id:e});s&&console.error("error",s)}),jc=t=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let r=0;r<t;r++)s+=e.charAt(Math.floor(Math.random()*e.length));return s},is=5;let at=null;window.addEventListener("load",()=>{Cc(),document.querySelectorAll("video").forEach(e=>{e.addEventListener("play",()=>{at&&clearInterval(at),at=setInterval(()=>h(void 0,null,function*(){const s=yield Ri.from("session_activity").insert({session_id:sessionStorage.getItem("sessionId"),member_id:xi().id,video_url:e.src,duration:is,start_time:m().subtract(is,"seconds").toISOString(),end_time:m().toISOString(),year:m().year(),month:m().month(),day:m().date()});console.log(s)}),is*1e3)}),e.addEventListener("pause",()=>{at&&clearInterval(at)})})});export{Ni as g};
